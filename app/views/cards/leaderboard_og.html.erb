<% kind = params[:kind].presence || "followers_gain_30d" %>
<% window = params[:window].presence || "30d" %>
<% lb = Leaderboard.where(kind: kind, window: window).order(as_of: :desc).first %>
<% podium = Array(lb&.entries).first(3) %>
<div class="w-[1200px] h-[630px] relative overflow-hidden">
  <div class="absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-900 to-indigo-900"></div>
  <div class="absolute inset-0 opacity-25" style="background: radial-gradient(800px 400px at 20% 0%, rgba(56,189,248,0.35), transparent), radial-gradient(800px 400px at 80% 100%, rgba(99,102,241,0.35), transparent);"></div>
  <div class="absolute inset-0 bg-[linear-gradient(to_right,rgba(255,255,255,0.08)_1px,transparent_1px),linear-gradient(to_bottom,rgba(255,255,255,0.06)_1px,transparent_1px)] bg-[size:32px_32px]"></div>

  <div class="relative z-10 h-full w-full p-10 flex flex-col">
    <div class="flex items-center justify-between">
      <div>
        <div class="text-sm uppercase tracking-widest text-slate-300">TecHub Leaderboard</div>
        <div class="mt-1 text-3xl font-extrabold text-white">Top Momentum</div>
      </div>
      <div class="text-right">
        <div class="text-xs text-slate-300">as of</div>
        <div class="text-sm font-semibold text-white"><%= lb&.as_of || Date.today %></div>
      </div>
    </div>

    <div class="mt-8 grid grid-cols-3 gap-6 items-end">
      <% podium.each_with_index do |e, idx| %>
        <% login = e["login"] || e[:login] %>
        <% value = e["value"] || e[:value] %>
        <% tier = (idx == 0) ? 'from-amber-400 to-amber-300' : (idx == 1) ? 'from-slate-300 to-slate-200' : 'from-amber-700 to-amber-600' %>
        <div class="relative rounded-2xl border border-white/10 bg-white/5 p-6 backdrop-blur-sm shadow-2xl">
          <div class="absolute -top-4 left-6 inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 text-xs font-semibold text-white">
            <span class="inline-grid h-6 w-6 place-items-center rounded-full bg-gradient-to-br <%= tier %> text-slate-900">#<%= idx+1 %></span>
            <span class="opacity-90">Podium</span>
          </div>
          <div class="flex items-center gap-4">
            <div class="h-16 w-16 flex-shrink-0 overflow-hidden rounded-full ring-2 ring-white/20">
              <img src="https://github.com/<%= login %>.png?size=160" alt="@<%= login %>" class="h-full w-full object-cover" />
            </div>
            <div class="min-w-0">
              <div class="truncate text-xl font-bold text-white">@<%= login %></div>
              <div class="mt-1 text-sm text-slate-300">
                <span class="inline-flex items-center rounded-md bg-white/10 px-2 py-0.5">Score: <span class="ml-1 font-semibold text-white"><%= value %></span></span>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <div class="mt-auto flex items-center justify-between pt-6">
      <div class="text-sm text-slate-300">Kind: <span class="font-semibold text-white"><%= kind %></span> Â· Window: <span class="font-semibold text-white"><%= window %></span></div>
      <div class="text-base font-semibold tracking-wide text-slate-200">techub.life</div>
    </div>
  </div>
</div>