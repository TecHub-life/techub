<%# General Settings Tab %>
<div class="space-y-6">
  <% card = profile.profile_card %>
  <div class="rounded-xl border border-slate-200 bg-white p-4 md:p-6 shadow-lg dark:border-slate-700 dark:bg-slate-900">
    <div class="mb-4">
      <h2 class="text-xl font-bold text-slate-900 dark:text-slate-100">AI Profile Snapshot</h2>
      <p class="text-sm text-slate-600 dark:text-slate-400 mt-1">Everything the AI generated for your trading card and social persona.</p>
    </div>
    <% if card.present? %>
      <div class="space-y-6 md:space-y-0 md:grid md:grid-cols-2 md:gap-6">
        <div class="space-y-4">
          <div class="space-y-1 text-sm text-slate-700 dark:text-slate-300">
            <% if card.title.present? %>
              <p class="text-xs font-semibold uppercase tracking-wide text-indigo-600 dark:text-indigo-300">Title</p>
              <p class="text-base font-semibold text-slate-900 dark:text-slate-100"><%= card.title %></p>
            <% end %>
            <% if card.tagline.present? %>
              <p class="text-xs font-semibold uppercase tracking-wide text-indigo-600 dark:text-indigo-300 mt-3">Tagline</p>
              <p class="italic text-slate-600 dark:text-slate-400"><%= card.tagline %></p>
            <% end %>
            <% if card.flavor_text.present? %>
              <p class="text-xs font-semibold uppercase tracking-wide text-indigo-600 dark:text-indigo-300 mt-3">Flavor Text</p>
              <p class="italic text-slate-500 dark:text-slate-400">"<%= card.flavor_text %>"</p>
            <% end %>
          </div>

          <div>
            <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">Stats</h3>
            <div class="mt-2 flex flex-wrap gap-2">
              <span class="inline-flex items-center gap-1 rounded-full bg-amber-100 px-2.5 py-1 text-xs font-semibold text-amber-700 dark:bg-amber-900/40 dark:text-amber-300">‚öîÔ∏è Attack <%= card.attack %></span>
              <span class="inline-flex items-center gap-1 rounded-full bg-blue-100 px-2.5 py-1 text-xs font-semibold text-blue-700 dark:bg-blue-900/40 dark:text-blue-300">üõ°Ô∏è Defense <%= card.defense %></span>
              <span class="inline-flex items-center gap-1 rounded-full bg-emerald-100 px-2.5 py-1 text-xs font-semibold text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300">‚ö° Speed <%= card.speed %></span>
            </div>
          </div>

          <div class="space-y-3">
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-emerald-600 dark:text-emerald-400">Buff</p>
              <p class="text-sm font-semibold text-slate-900 dark:text-slate-100"><%= card.buff %></p>
              <% if card.buff_description.present? %>
                <p class="text-xs text-slate-600 dark:text-slate-400 mt-1"><%= card.buff_description %></p>
              <% end %>
            </div>
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-amber-600 dark:text-amber-400">Weakness</p>
              <p class="text-sm font-semibold text-slate-900 dark:text-slate-100"><%= card.weakness %></p>
              <% if card.weakness_description.present? %>
                <p class="text-xs text-slate-600 dark:text-slate-400 mt-1"><%= card.weakness_description %></p>
              <% end %>
            </div>
            <div>
              <p class="text-xs font-semibold uppercase tracking-wide text-teal-600 dark:text-teal-400">Vibe</p>
              <p class="text-sm font-semibold text-slate-900 dark:text-slate-100"><%= card.vibe %></p>
              <% if card.vibe_description.present? %>
                <p class="text-xs text-slate-600 dark:text-slate-400 mt-1"><%= card.vibe_description %></p>
              <% end %>
            </div>
          </div>
        </div>

        <div class="space-y-4">
          <div>
            <p class="text-xs font-semibold uppercase tracking-wide text-indigo-600 dark:text-indigo-300">Special Move</p>
            <p class="text-sm font-semibold text-indigo-900 dark:text-indigo-100"><%= card.special_move %></p>
            <% if card.special_move_description.present? %>
              <p class="text-xs text-indigo-700 dark:text-indigo-300 mt-1"><%= card.special_move_description %></p>
            <% end %>
          </div>

          <div>
            <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">Card Attributes</h3>
            <div class="mt-2 space-y-2 text-sm text-slate-700 dark:text-slate-300">
              <% if card.playing_card.present? %>
                <div class="flex items-center justify-between">
                  <span>Playing Card</span>
                  <span class="font-semibold text-slate-900 dark:text-slate-100"><%= card.playing_card %></span>
                </div>
              <% end %>
              <% if card.spirit_animal.present? %>
                <div class="flex items-center justify-between">
                  <span>Spirit Animal</span>
                  <span class="font-semibold text-slate-900 dark:text-slate-100"><%= card.spirit_animal %></span>
                </div>
              <% end %>
              <% if card.archetype.present? %>
                <div class="flex items-center justify-between">
                  <span>Archetype</span>
                  <span class="font-semibold text-slate-900 dark:text-slate-100"><%= card.archetype %></span>
                </div>
              <% end %>
            </div>
          </div>

          <% if Array(card.tags).any? %>
            <div>
              <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">Tags</h3>
              <div class="mt-2 flex flex-wrap gap-1.5">
                <% Array(card.tags).each do |tag| %>
                  <span class="inline-flex items-center rounded-full bg-indigo-100 px-2 py-1 text-xs font-medium text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300">#<%= tag %></span>
                <% end %>
              </div>
            </div>
          <% end %>

          <% if card.short_bio.present? %>
            <div>
              <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">Short Bio</h3>
              <p class="mt-1 text-sm text-slate-600 dark:text-slate-400"><%= card.short_bio %></p>
            </div>
          <% end %>

          <% if card.long_bio.present? %>
            <div>
              <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">Long Bio</h3>
              <div class="mt-1 max-h-48 overflow-y-auto text-sm text-slate-600 dark:text-slate-400">
                <%= simple_format(card.long_bio) %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% else %>
      <p class="text-sm text-slate-600 dark:text-slate-400">No AI card has been generated yet. Run the full pipeline to populate these fields.</p>
    <% end %>
  </div>

  <div class="rounded-xl border border-slate-200 bg-white p-4 md:p-6 shadow-lg dark:border-slate-700 dark:bg-slate-900">
    <h2 class="text-xl font-bold text-slate-900 dark:text-slate-100 mb-4">Privacy & Sharing</h2>
    <form action="<%= update_my_profile_settings_path(username: profile.login) %>" method="post" class="space-y-4" data-controller="submit-form">
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      <%= hidden_field_tag :tab, "general" %>
      <input type="hidden" name="_method" value="patch">
      <label class="inline-flex items-center gap-3 text-sm md:text-base cursor-pointer text-slate-700 dark:text-slate-300">
        <input type="hidden" name="ai_art_opt_in" value="0">
        <input type="checkbox" name="ai_art_opt_in" value="1" <%= 'checked' if profile.ai_art_opt_in %> class="<%= ui_checkbox_class %>">
        <span>Allow my AI artwork to be featured publicly (gallery & promos)</span>
      </label>

      <div class="pt-2">
        <p class="text-sm font-semibold text-slate-800 dark:text-slate-200 mb-1">Available for hire badge</p>
        <div class="flex items-center gap-3">
          <label class="inline-flex items-center gap-2 cursor-pointer text-slate-700 dark:text-slate-300">
            <input type="hidden" name="hireable_override" value="0">
            <input type="checkbox" name="hireable_override" value="1" <%= 'checked' if profile.hireable_display? %> class="<%= ui_checkbox_class %>">
            <span>Show the ‚ÄúAvailable for hire‚Äù badge on my profile</span>
          </label>
        </div>
        <p class="mt-1 text-xs text-slate-500 dark:text-slate-400">You control this here. Toggle on/off anytime.</p>
      </div>
      <div class="flex items-center gap-3">
        <button type="submit" class="<%= ui_primary_button_class %>" data-submit-form-target="button">
          <span data-submit-form-target="spinner" class="hidden">
            <svg class="h-4 w-4 animate-spin" viewBox="0 0 24 24" fill="none">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V2C5.373 2 1 6.373 1 12h3zm2 5.291A7.962 7.962 0 014 12H1c0 3.042 1.135 5.824 3 7.938l2-2.647z"></path>
            </svg>
          </span>
          <span data-submit-form-target="text">Save changes</span>
        </button>
        <a href="/gallery" target="_blank" class="text-sm font-medium text-indigo-600 hover:text-indigo-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300">View public gallery ‚Üí</a>
      </div>
    </form>
  </div>

  <div class="rounded-xl border border-slate-200 bg-white p-4 md:p-6 shadow-lg dark:border-slate-700 dark:bg-slate-900">
    <h2 class="text-xl font-bold text-slate-900 dark:text-slate-100 mb-4">Avatar &amp; Banner</h2>
    <% github_avatar = profile.avatar_url.presence || asset_path("android-chrome-512x512.jpg") %>
    <% uploaded_avatar_url = profile_uploaded_asset_url(profile, "avatar_1x1") %>
    <% library_default_path = avatar_library_path_for(profile, :default) %>
    <% banner_choice = profile.banner_choice %>
    <% banner_library_value = banner_library_path_for(profile) %>
    <% banner_preview = banner_image_url_for(profile) %>
    <% uploads_enabled = defined?(Storage::ActiveStorageUploadService) %>
    <form action="<%= update_my_profile_settings_path(username: profile.login) %>" method="post" class="space-y-6" data-controller="submit-form">
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      <%= hidden_field_tag :tab, "general" %>
      <input type="hidden" name="_method" value="patch">

      <div class="space-y-4">
        <div>
          <p class="text-sm text-slate-600 dark:text-slate-300">Choose the default avatar used on your profile and every screenshot. Override specific variants in the advanced section.</p>
        </div>

        <div class="grid gap-3 sm:grid-cols-3">
          <label class="cursor-pointer">
            <input type="radio" name="avatar_default_mode" value="github" class="peer sr-only" <%= "checked" if avatar_mode_for(profile, :default) == "github" %>>
            <div class="rounded border-2 border-slate-200 p-3 transition peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 dark:border-slate-700 dark:peer-checked:ring-indigo-900">
              <div class="aspect-square overflow-hidden rounded bg-slate-100 dark:bg-slate-800">
                <img src="<%= github_avatar %>" alt="GitHub avatar" class="h-full w-full object-cover" onerror="this.onerror=null; this.src='<%= asset_path("android-chrome-512x512.jpg") %>'">
              </div>
              <p class="mt-2 text-center text-xs font-medium text-slate-700 dark:text-slate-200">GitHub Avatar</p>
            </div>
          </label>

          <label class="cursor-pointer">
            <input type="radio" name="avatar_default_mode" value="upload" class="peer sr-only" <%= "checked" if avatar_mode_for(profile, :default) == "upload" %>>
            <div class="rounded border-2 border-slate-200 p-3 transition peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 dark:border-slate-700 dark:peer-checked:ring-indigo-900">
              <div class="aspect-square overflow-hidden rounded bg-slate-100 dark:bg-slate-800 flex items-center justify-center">
                <% if uploaded_avatar_url.present? %>
                  <img src="<%= uploaded_avatar_url %>" alt="Uploaded avatar" class="h-full w-full object-cover">
                <% else %>
                  <span class="text-xs text-slate-500 dark:text-slate-400 text-center px-3">Upload an avatar below to use this option.</span>
                <% end %>
              </div>
              <p class="mt-2 text-center text-xs font-medium text-slate-700 dark:text-slate-200">Custom Upload</p>
            </div>
          </label>

          <label class="cursor-pointer">
            <input type="radio" name="avatar_default_mode" value="library" class="peer sr-only" <%= "checked" if avatar_mode_for(profile, :default) == "library" %>>
            <div class="rounded border-2 border-slate-200 p-3 transition peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 dark:border-slate-700 dark:peer-checked:ring-indigo-900">
              <div class="aspect-square overflow-hidden rounded bg-slate-100 dark:bg-slate-800 flex items-center justify-center">
                <% if library_default_path.present? %>
                  <img src="<%= asset_path(library_default_path) %>" alt="Library avatar" class="h-full w-full object-cover">
                <% else %>
                  <div class="text-xs text-slate-500 dark:text-slate-400 text-center px-3">Pick an avatar from Spirit Animals, Archetypes, or TecHub avatars.</div>
                <% end %>
              </div>
              <p class="mt-2 text-center text-xs font-medium text-slate-700 dark:text-slate-200">TecHub Library</p>
            </div>
          </label>
        </div>

        <div>
          <label class="text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">Library image (used when Library is selected)</label>
          <select name="avatar_default_path" class="<%= ui_select_class %> mt-1">
            <option value="">Select an avatar</option>
            <% @avatar_library_options.each do |opt| %>
              <option value="<%= opt[:path] %>" <%= "selected" if opt[:path] == library_default_path %>><%= opt[:label] %></option>
            <% end %>
          </select>
        </div>
      </div>

      <details class="rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm dark:border-slate-700 dark:bg-slate-800">
        <summary class="cursor-pointer font-semibold text-slate-700 dark:text-slate-200">Advanced: per-screenshot avatars</summary>
        <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">Set overrides for specific card captures. Leave as ‚ÄúInherit default‚Äù to reuse your main avatar.</p>
        <div class="mt-3 overflow-x-auto">
          <table class="min-w-full text-xs">
            <thead>
              <tr class="text-left text-slate-500 dark:text-slate-400">
                <th class="px-2 py-1 font-semibold">Variant</th>
                <th class="px-2 py-1 font-semibold">Mode</th>
                <th class="px-2 py-1 font-semibold">Library Image</th>
              </tr>
            </thead>
            <tbody class="text-slate-700 dark:text-slate-200">
              <% {
                profile: "Profile hero",
                card: "Cards (16:9)",
                og: "OG / Link previews",
                simple: "Simple cards",
                square: "Square crops (X profile)",
                banner: "3x1 banners"
              }.each do |variant, label| %>
                <tr class="border-t border-slate-200 dark:border-slate-700">
                  <td class="px-2 py-2"><%= label %></td>
                  <td class="px-2 py-2">
                    <select name="avatar_<%= variant %>_mode" class="<%= ui_select_class %>">
                      <% current_mode = avatar_mode_for(profile, variant) %>
                      <% if variant != :default %>
                        <option value="inherit" <%= "selected" if current_mode == "inherit" %>>Inherit default</option>
                      <% end %>
                      <% %w[github upload library].each do |mode| %>
                        <option value="<%= mode %>" <%= "selected" if current_mode == mode %>><%= mode.titleize %></option>
                      <% end %>
                    </select>
                  </td>
                  <td class="px-2 py-2">
                    <select name="avatar_<%= variant %>_path" class="<%= ui_select_class %>">
                      <option value="">Use default library</option>
                      <% current_path = avatar_library_path_for(profile, variant) %>
                      <% @avatar_library_options.each do |opt| %>
                        <option value="<%= opt[:path] %>" <%= "selected" if opt[:path] == current_path %>><%= opt[:label] %></option>
                      <% end %>
                    </select>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </details>

      <div class="rounded-lg border border-slate-200 bg-white/70 p-4 shadow-inner dark:border-slate-700 dark:bg-slate-900/50">
        <h3 class="text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2">Profile Banner</h3>
        <p class="text-xs text-slate-500 dark:text-slate-400 mb-3">Display a 3√ó1 banner above your profile hero. The same art is used for banner-style screenshots.</p>
        <div class="grid gap-3 sm:grid-cols-3">
          <label class="cursor-pointer">
            <input type="radio" name="banner_choice" value="none" class="peer sr-only" <%= "checked" if banner_choice == "none" %>>
            <div class="rounded border-2 border-slate-200 p-2 text-center text-xs font-medium text-slate-600 transition peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 dark:border-slate-700 dark:text-slate-300 dark:peer-checked:ring-indigo-900">
              No banner
            </div>
          </label>
          <label class="cursor-pointer">
            <input type="radio" name="banner_choice" value="library" class="peer sr-only" <%= "checked" if banner_choice == "library" %>>
            <div class="rounded border-2 border-slate-200 p-2 transition peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 dark:border-slate-700 dark:peer-checked:ring-indigo-900">
              <div class="aspect-[3/1] overflow-hidden rounded bg-slate-100 dark:bg-slate-800">
                <% if banner_library_value.present? %>
                  <img src="<%= asset_path(banner_library_value) %>" alt="Banner library preview" class="h-full w-full object-cover">
                <% else %>
                  <div class="flex h-full items-center justify-center text-[11px] text-slate-500 dark:text-slate-400 px-2 text-center">Pick from app/assets/images/3x1-banners</div>
                <% end %>
              </div>
              <p class="mt-2 text-center text-xs font-medium text-slate-700 dark:text-slate-200">TecHub Banner</p>
            </div>
          </label>
          <label class="cursor-pointer">
            <input type="radio" name="banner_choice" value="upload" class="peer sr-only" <%= "checked" if banner_choice == "upload" %>>
            <div class="rounded border-2 border-slate-200 p-2 transition peer-checked:border-indigo-500 peer-checked:ring-2 peer-checked:ring-indigo-200 dark:border-slate-700 dark:peer-checked:ring-indigo-900">
              <div class="aspect-[3/1] overflow-hidden rounded bg-slate-100 dark:bg-slate-800 flex items-center justify-center">
                <% uploaded_banner_url = profile_uploaded_asset_url(profile, "banner_3x1") %>
                <% if uploaded_banner_url.present? %>
                  <img src="<%= uploaded_banner_url %>" alt="Uploaded banner" class="h-full w-full object-cover">
                <% else %>
                  <span class="text-[11px] text-slate-500 dark:text-slate-400 px-2 text-center">Upload a 3√ó1 banner below.</span>
                <% end %>
              </div>
              <p class="mt-2 text-center text-xs font-medium text-slate-700 dark:text-slate-200">Custom Upload</p>
            </div>
          </label>
        </div>
        <div class="mt-3">
          <label class="text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400">Library banner</label>
          <select name="banner_library_path" class="<%= ui_select_class %> mt-1" <%= "disabled" unless banner_choice == "library" %>>
            <option value="">Select a banner</option>
            <% @banner_library_options.each do |opt| %>
              <option value="<%= opt[:path] %>" <%= "selected" if opt[:path] == banner_library_value %>><%= opt[:label] %></option>
            <% end %>
          </select>
        </div>
        <% if banner_preview.present? %>
          <div class="mt-3 rounded-lg border border-slate-200 bg-slate-100 p-2 dark:border-slate-700 dark:bg-slate-800">
            <p class="text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-1">Preview</p>
            <img src="<%= banner_preview %>" alt="Banner preview" class="w-full rounded object-cover">
          </div>
        <% end %>
      </div>

      <button type="submit" class="<%= ui_primary_button_class %>" data-submit-form-target="button">
        <span data-submit-form-target="spinner" class="hidden">
          <svg class="h-4 w-4 animate-spin" viewBox="0 0 24 24" fill="none">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V2C5.373 2 1 6.373 1 12h3zm2 5.291A7.962 7.962 0 014 12H1c0 3.042 1.135 5.824 3 7.938l2-2.647z"></path>
          </svg>
        </span>
        <span data-submit-form-target="text">Save avatar & banner</span>
      </button>
    </form>

    <div class="mt-6 rounded-lg border border-slate-200 bg-slate-50 p-4 dark:border-slate-600 dark:bg-slate-800">
      <h3 class="text-sm font-semibold text-slate-900 dark:text-slate-100 mb-3">Upload Custom Avatar</h3>
      <form action="<%= upload_my_profile_asset_path(username: profile.login) %>" method="post" enctype="multipart/form-data" class="space-y-4" data-controller="submit-form">
        <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
        <%= hidden_field_tag :tab, "general" %>
        <input type="hidden" name="kind" value="avatar_1x1">
        <input type="file" name="file" accept="image/*" class="<%= ui_file_input_class %> <%= 'opacity-60 cursor-not-allowed' unless uploads_enabled %>" <%= "disabled" unless uploads_enabled %>>
        <button type="submit" class="<%= ui_secondary_button_class %> w-full <%= 'opacity-60 cursor-not-allowed' unless uploads_enabled %>" <%= "disabled" unless uploads_enabled %> data-submit-form-target="button">
          <span data-submit-form-target="spinner" class="hidden">
            <svg class="h-4 w-4 animate-spin" viewBox="0 0 24 24" fill="none">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V2C5.373 2 1 6.373 1 12h3zm2 5.291A7.962 7.962 0 014 12H1c0 3.042 1.135 5.824 3 7.938l2-2.647z"></path>
            </svg>
          </span>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
          </svg>
          <span data-submit-form-target="text">Upload avatar</span>
        </button>
      </form>
      <p class="mt-2 text-xs text-slate-500">Upload your own avatar image. Recommended: square image, at least 400x400px.</p>
      <% unless uploads_enabled %>
        <p class="mt-1 text-xs text-amber-600 dark:text-amber-400">Uploads are disabled in this environment.</p>
      <% end %>
    </div>

    <div class="mt-4 rounded-lg border border-slate-200 bg-slate-50 p-4 dark:border-slate-600 dark:bg-slate-800">
      <h3 class="text-sm font-semibold text-slate-900 dark:text-slate-100 mb-3">Upload Custom Banner (3√ó1)</h3>
      <form action="<%= upload_my_profile_asset_path(username: profile.login) %>" method="post" enctype="multipart/form-data" class="space-y-4" data-controller="submit-form">
        <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
        <%= hidden_field_tag :tab, "general" %>
        <input type="hidden" name="kind" value="banner_3x1">
        <input type="file" name="file" accept="image/*" class="<%= ui_file_input_class %> <%= 'opacity-60 cursor-not-allowed' unless uploads_enabled %>" <%= "disabled" unless uploads_enabled %>>
        <button type="submit" class="<%= ui_secondary_button_class %> w-full <%= 'opacity-60 cursor-not-allowed' unless uploads_enabled %>" <%= "disabled" unless uploads_enabled %> data-submit-form-target="button">
          <span data-submit-form-target="spinner" class="hidden">
            <svg class="h-4 w-4 animate-spin" viewBox="0 0 24 24" fill="none">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V2C5.373 2 1 6.373 1 12h3zm2 5.291A7.962 7.962 0 014 12H1c0 3.042 1.135 5.824 3 7.938l2-2.647z"></path>
            </svg>
          </span>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
          </svg>
          <span data-submit-form-target="text">Upload banner</span>
        </button>
      </form>
      <p class="mt-2 text-xs text-slate-500">Recommended: 1500√ó500 or larger, JPG/PNG.</p>
      <% unless uploads_enabled %>
        <p class="mt-1 text-xs text-amber-600 dark:text-amber-400">Uploads are disabled in this environment.</p>
      <% end %>
    </div>
  </div>

  <div class="rounded-xl border border-red-200 bg-red-50 p-4 md:p-6 shadow-lg dark:border-red-800 dark:bg-red-900/20">
    <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
      <div>
        <h3 class="text-lg font-bold text-red-800 dark:text-red-200">Delete Profile</h3>
        <p class="text-sm text-red-700 dark:text-red-300">Remove @<%= profile.login %> from TecHub. The profile stays hidden until someone submits it again (no pipeline reroll).</p>
      </div>
      <%= button_to "Delete @#{profile.login}", unlist_my_profile_path(username: profile.login), method: :delete, form: { class: "inline", data: { turbo_confirm: "Delete @#{profile.login}? This hides the profile until someone submits it again." } }, class: "inline-flex items-center justify-center rounded-lg bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600" %>
    </div>
  </div>
</div>
